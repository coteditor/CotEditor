
changelog
==========================

1.5
--------------------------

### new

- "CoffeeScript", "Dart", "Diff", "INI", "Makefile", "reStructuredText", "Textile", "YAML" シンタックス定義を追加

### mod

- "Perl" シンタックス定義の更新
    - 数値, 変数のカラーリング
    - いくつかのキーワードの追加
    - コメントカラーリングの改善

### fix

- [1.5β1] シンタックス定義名を編集したときに、変更が大文字／小文字の入れ替えのみだとアラートが出て保存できない不具合を修正



1.5β1
--------------------------

### new

- 新しいカラーコードパネル
    - 6桁のHex だけではなく 3桁 Hex および CSS の `rgb()`, `rgba()`, `hsl()`, `hsla()` にも対応
    - カラーコードパネルからさらにカラーパネルを呼び出すのではなく、カラーパネル下部に直接カラーコード編集フィールドを埋め込んだ
    - パネルでの編集カラーがテキストビューに反映されないように変更
    - ツールバーに「カラーコードを編集」を追加
- ステータスバーに表示する内容を環境設定で選べるように
- ステータスバーに単語数およびファイルサイズの表示を追加
- 情報ドロワーに単語数、ファイルサイズおよびバイト数の表示を追加
- メニューバーおよびツールバーから現在のウインドウにのみ有効なタブスペース設定が可能に
- 自動インデントが有効な状態で `{` または `:` の直後に改行したときは、新しい行のインデントレベルを自動的にひとつ深くするように改良
- "JSON" シンタックス定義を追加
- アンダースコア（_）から始まるスクリプト／フォルダはスクリプトメニューに表示しない仕様を追加
- [実験的実装]「フォーマット」メニューに「縦書きで表示」を追加し、縦書き適応時の表示も改善（縦書き時は行番号は常に非表示になります）


### mod

- 取り扱えるエンコーディングに「欧米 (ASCII)」および「中国語 (GB 18030)」を追加
- ユーザインターフェイス上の表現・ローカライズの大幅な調整
- "HTML" シンタックス定義の更新
    - HTML5 および HTML5.1 に対応
    - カラーリング精度の向上
- 編集メニューにスピーチ機能を追加
- テキストビューのスマート引用符およびスマートダッシュの有効化の設定を環境設定に追加
- メインの編集ビュー以外のテキストボックスのスマートダッシュ／引用符を強制で無効にした
- デフォルトのエンコーディング判定は「UTF-8」を最優先するように変更
    - 1.5 以前からアップデートした場合は、環境設定 > フォーマット > リストを編集 から「出荷時に戻す」を実行する必要があります
- ウインドウの透明化に関する変更
    - ウインドウ全体の透明化の機能を廃止し、不透明度は常にビュー部分にだけ反映されるよう変更
    - 行番号ビューもテキストビューに合わせて透過
    - 表記「透明度 (transparency)」を「不透明度 (opacity)」に修正
    - 不透明度パネルの「全ウインドウに適応」ボタンを「デフォルトとして保存」に変更し、値を現在のウインドウに適応するだけではなくデフォルトとしても保存されるように変更
    - 環境設定内の不透明度設定のガイド画像をより透過がわかりやすいものに更新
    - ウインドウが不透明のときはウインドウのドロップシャドウが通常のものになるように修正
- ウインドウオープン時の挙動に関する変更
    - 最後に開いていた書類ウインドウの位置を記憶し、次回ウインドウオープン時にその位置にウインドウを配置するよう仕様を変更
    - 新しいウインドウをオープンしたときに未編集のブランクウインドウがあった場合は自動的にブランクウインドウの方を閉じる仕様を廃止
- プリントに関する変更
    - プリントパネルにプレビュー機能を実装
    - プリントジョブに書類名が反映されるように変更
    - 印刷のヘッダ／フッタに表示できる情報にシンタックス名を追加
    - ページ数の両側にハイフンを表示しないように変更
    - プリントパネルのレイアウトを調整
- トグルアクションをするメニューバー項目のチェックマークを廃止し、項目名を「表示」と「隠す」など状況によって適切に変更するようにした
- シンタックス定義ファイルの管理方法を 変更
    - バンドル版のシンタックス定義をアプリケーション起動時にユーザの Application Support/ 領域にコピーしないように変更
        - これにより、CotEditor 1.5 以降でバンドル版シンタックス定義が更新された場合も、定義がカスタマイズされていなければその更新に追従するようになりました
            - これは過去にコピーされた定義については有効ではありません。過去の CotEditor で読み込まれたシンタックス定義にバンドル版の最新版を反映させるには、環境設定 > フォーマット > インストール済みスタイル の各スタイル定義の編集画面から「出荷時に戻す」を一度実行する必要があります。
        - [上級者向け] この仕様変更を受けて、CotEdito 1.5 時点でバンドル版と同じ定義がユーザ領域にあった場合は、その定義を ~/Application Support/CotEditor/SyntaxColorings (old)/ に避難させるようにしました。この SyntaxColorings (old)/ ディレクトリは移行時のバックアップなので気になる場合は削除しても構いません。
    - シンタックス定義の読み込み／書き出し時に、Sandbox 水準のより安全なファイル操作をするようにした
- 環境設定ウインドウに関する変更
    - よりコンパクトなウインドウ
    - 環境設定の配置を刷新
        - 「シンタックス」ペインを廃止し、シンタックススタイルに関する設定は「フォーマット」ペインに、カラーリングに関する設定は「表示」ペインに統合
        - 「一般」ペイン、「表示」ペイン、「フォーマット」ペインから、テキスト編集に関する設定を抽出し「編集」ペインを新設
        - ほか、いくつかの設定項目の位置の移動
    - よりわかりやすく OS X らしい表現を用いたラベル表記
    - フォント設定のフォント名表示に選択されているフォントスタイルを適応
    - ウインドウのタイトルをその時選択されているペイン名に変更
    - シンタックス定義の管理に関するユーザインターフェイスを刷新
    - シンタックス定義編集シートの更新
        - 各ペインへの移動をポップアップボタンからリスト選択式に変更
        - テーブル内の複数項目を一度に選択＆削除できるように変更
        - スタイル名入力時にリアルタイムで名前の有効性を検証し、無効な場合はその場でエラーメッセージを表示するように変更
    - 拡張子コンフリクトシートのデザインを改善
    - 数値入力欄にはクリックで ±1 ができるステッパーを併設
- AppleScript 対応に関する変更
    - document オブジェクトの `transparency` および `alpha only textView` プロパティの廃止
    - window オブジェクトに `view opacity` プロパティを追加
    - 非推奨扱いだった Application オブジェクト直下の `selection` を正式に廃止
- サンプルスクリプトおよび CotEditor スクリプトに関するドキュメントの保存場所の変更
    - CotEditor スクリプトに関するドキュメントはヘルプメニューからアクセスできるように変更
    - サンプルスクリプトを ScriptMenu フォルダにコピーするタイミングを初回起動時のみに変更
    - option キーを押したときにだけスクリプトメニューに表示される隠しメニュー項目「サンプルをスクリプトフォルダにコピー」を追加（通常、サンプルスクリプトは初回起動時に自動的にスクリプトフォルダにコピーされています）
- 重要度の低い設定項目の廃止
    - OS X 10.5 まででファイルタイプを識別するためにシステムで使用されていた Type/Creator 属性を、参照・付与する機能を廃止
    - 行番号の折り返しマーク表示の設定項目を廃止し、マークは常に表示するように変更
    - 現在行カラーリングのオプション設定項目「IM 変換中の文字も含む」を廃止し、常に変換中の文字も含むよう変更
- ヘルプメニューに「不具合を報告...」項目を追加
- 背景色が暗いときは明るい色のスクローラを使うように変更
- 移動パネルの行／文字選択をラジオボタンからポップアップボタンに変更
- ドロワーのレイアウトを変更
- ウインドウリサイズに追従してリアルタイムで行番号ビューも更新するように変更
- 文字入力中のシンタックスカラーリング精度を向上
- メモリ管理を ARC (Automatic Reference Counting) に移行
- アプリケーション起動時の処理を軽減
- Sparkle framework を 1.6.0 に更新
    - Software update 画面に日本語ロケールを追加
    - 「今後はインストールを自動的に行う」のチェックボックスが正常動作するように修正
- ほか内部コードの変更とドキュメントの更新


### fix

- プリントヘッダ／フッタのページ数がすべて「-1-」になる不具合を修正
- ツールバー上の改行コードポップアップメニューに選択項目のチェックマークが表示されない不具合を修正
- 文字列の置換後、再カラーリングが実行されない不具合を修正
- AppleScript からの `close` コマンドが無視される不具合を修正
- AppleScript から望ましくないウインドウオブジェクトが見え、かつ操作できる不具合を修正
- AppleScript から検索／置換をしたとき、書類の改行コードが CR のだと `^` (行頭) が認識されない不具合を修正
- フォントパネルからウインドウのフォントを一時的に変更したとき、タブ幅が新しいフォントに追従しない不具合を修正
- シンタックスカラーリング定義にコメントの定義が含まれていないとき、クオート文字で囲まれた文字列がカラーリングされない不具合を修正
- シンタックススタイル編集の保存時に一定条件下で、無効なスタイル名でも警告なしに保存ができないまま編集が終了していた不具合を修正
- シンタックススタイル編集の保存時に一定条件下で、新しいスタイルと同名の既存スタイルがあったとき警告なしに上書きしていた不具合を修正
- シンタックススタイル定義に空の拡張子の定義が含まれると、アプリケーションががフリーズして次回以降立ち上がらなくなる不具合を修正
- 日本語環境でバックスラッシュが含まれたキーバインドが機能しない不具合を修正
- 環境設定のエンコーディングリストの文字列が編集可能だった不具合を修正
- 日本語環境で、ツールバー編集シート内のカラーコードエディタ関連アイコンがローカライズされていなかった不具合を修正
- 非 ASCII 文字を含んだ文書を「無損失 ASCII (Non-lossy ASCII)」で保存しようとすると静かに保存に失敗する不具合を修正
- アプリケーション終了時にファインダーロックが外せない未保存の書類を閉じようとしたとき出る確認アラートで、「保存しないで閉じる」ボタンを選択してもウインドウが閉じるだけでアプリケーションが終了しない不具合を修正
- アプリケーションアイコンに描かれている PHP コードの誤りを修正
